{% extends "customer_base.html" %}

{% block title %}My Account - White Thorn Piercing{% endblock %}

{% block content %}
<div class="container">
    <h1>Welcome, {{ user.name.split()[0] }}!</h1>
    <p class="subtitle">Manage your appointments and view aftercare advice</p>

    <!-- Quick Stats -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0;">
        <div class="card" style="text-align: center; padding: 25px;">
            <div style="font-size: 36px; color: var(--gold); font-family: 'Cinzel', serif;">{{ total_bookings }}</div>
            <div style="color: rgba(245, 241, 232, 0.7); margin-top: 5px;">Total Bookings</div>
        </div>
        <div class="card" style="text-align: center; padding: 25px;">
            <div style="font-size: 36px; color: var(--gold); font-family: 'Cinzel', serif;">{{ completed_bookings }}</div>
            <div style="color: rgba(245, 241, 232, 0.7); margin-top: 5px;">Completed</div>
        </div>
    </div>

    <!-- Next Appointment -->
    {% if next_appointment %}
    <div class="card" style="border-color: var(--gold); margin-bottom: 30px;">
        <h3 style="color: var(--gold); margin-top: 0;">Next Appointment</h3>
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
            <div>
                <div style="font-size: 18px; margin-bottom: 5px;">{{ next_appointment.service.name }}</div>
                <div style="color: rgba(245, 241, 232, 0.7);">
                    {{ next_appointment.booking_date.strftime('%A, %d %B %Y') }} at {{ next_appointment.booking_time }}
                </div>
            </div>
            <a href="{{ url_for('customer_appointments') }}" class="btn btn-secondary" style="margin: 0; padding: 10px 20px;">View Details</a>
        </div>
    </div>
    {% else %}
    <div class="card" style="text-align: center; padding: 30px; margin-bottom: 30px;">
        <p style="color: rgba(245, 241, 232, 0.7); margin: 0 0 15px 0;">No upcoming appointments</p>
        <a href="{{ url_for('booking_page') }}" class="btn" style="margin: 0;">Book Now</a>
    </div>
    {% endif %}

    <!-- Quick Links -->
    <h2>Quick Links</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
        <a href="{{ url_for('customer_appointments') }}" class="card" style="text-decoration: none; display: flex; align-items: center; gap: 15px;">
            <div style="width: 50px; height: 50px; background: rgba(201, 169, 98, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <svg width="24" height="24" fill="none" stroke="var(--gold)" stroke-width="2" viewBox="0 0 24 24">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
            </div>
            <div>
                <div style="color: var(--gold-light); font-weight: 600;">Upcoming Appointments</div>
                <div style="color: rgba(245, 241, 232, 0.6); font-size: 14px;">View and manage your bookings</div>
            </div>
        </a>

        <a href="{{ url_for('customer_history') }}" class="card" style="text-decoration: none; display: flex; align-items: center; gap: 15px;">
            <div style="width: 50px; height: 50px; background: rgba(201, 169, 98, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <svg width="24" height="24" fill="none" stroke="var(--gold)" stroke-width="2" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
            </div>
            <div>
                <div style="color: var(--gold-light); font-weight: 600;">Booking History</div>
                <div style="color: rgba(245, 241, 232, 0.6); font-size: 14px;">View past appointments</div>
            </div>
        </a>

        <a href="https://whitethornpiercing.co.uk/aftercare" target="_blank" class="card" style="text-decoration: none; display: flex; align-items: center; gap: 15px;">
            <div style="width: 50px; height: 50px; background: rgba(201, 169, 98, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <svg width="24" height="24" fill="none" stroke="var(--gold)" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                </svg>
            </div>
            <div>
                <div style="color: var(--gold-light); font-weight: 600;">Aftercare Advice</div>
                <div style="color: rgba(245, 241, 232, 0.6); font-size: 14px;">Care instructions for your piercings</div>
            </div>
        </a>

        <a href="{{ url_for('booking_page') }}" class="card" style="text-decoration: none; display: flex; align-items: center; gap: 15px;">
            <div style="width: 50px; height: 50px; background: rgba(201, 169, 98, 0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                <svg width="24" height="24" fill="none" stroke="var(--gold)" stroke-width="2" viewBox="0 0 24 24">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
            </div>
            <div>
                <div style="color: var(--gold-light); font-weight: 600;">Book New Appointment</div>
                <div style="color: rgba(245, 241, 232, 0.6); font-size: 14px;">Schedule your next visit</div>
            </div>
        </a>
    </div>

    <!-- Account Details -->
    <div class="divider"></div>

    <h2>Account Details</h2>
    <div class="card">
        <div style="display: grid; gap: 15px;">
            <div>
                <div style="color: rgba(245, 241, 232, 0.6); font-size: 14px;">Name</div>
                <div>{{ user.name }}</div>
            </div>
            <div>
                <div style="color: rgba(245, 241, 232, 0.6); font-size: 14px;">Email</div>
                <div>{{ user.email }}</div>
            </div>
            {% if user.phone %}
            <div>
                <div style="color: rgba(245, 241, 232, 0.6); font-size: 14px;">Phone</div>
                <div>{{ user.phone }}</div>
            </div>
            {% endif %}
            <div>
                <div style="color: rgba(245, 241, 232, 0.6); font-size: 14px;">Member Since</div>
                <div>{{ user.created_at.strftime('%B %Y') }}</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
